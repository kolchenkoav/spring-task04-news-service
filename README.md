
![](pictures/logo.png)
[Постановка задачи](docs/Task.md)
# REST API для новостного сервиса





API предоставляет возможность:

* создавать пользователей и управлять ими,
* создавать категории новостей и управлять ими,
* создавать новости и управлять ими,
* создавать комментарии для новостей и управлять ими.

### Описание логики работы сервиса
1. Редактирование и удаление новости разрешается только тому пользователю, который её создал. Логика реализована через AOP.
2. Редактирование и удаление комментария к новости разрешается только тому пользователю, который его создал. AOP.
3. Возврат списка сущностей (findAll) происходит только с помощью пагинации. Исключение — список комментариев. В API список комментариев должен возвращаться только для конкретной новости.
4. При возврате списка новостей ответ не должен содержать списка комментариев к каждой новости. Вместо этого каждый объект из списка содержит значение, отображающее количество комментариев.
5. Если возвращается одна новость (findById), она содержит все комментарии к ней.
6. Использованна MapStruct для преобразования тела запроса в сущность, с помощью которой можно работать с базой данных. Все тела ответа преобразовываются в DTO.
7. Реализована фильтрацию новостей по категориям и авторам.
8. Есть обработка ошибок, которые могут произойти в приложении.
9. Есть валидацию входящих данных от клиента.

* Реализованы аспекты, которые выполняются перед методами(update и deleteById), в сервисах (News и Comment) которые помеченны своими аннотациями.  
Эти методы помечены **@Transactional** и если ID пользователя не совпадает с автором,   
то в классе LoggingAspect выполняется ОТКАТ **TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();** 
* Логики в контроллерах нет. Есть только вызов сервисных методов.      
* Фильтрация реализована с использованием спецификаций.

[Диаграмма базы данных app_db](pictures/app_db.png)

[Примеры работы с Postman](pictures/example.md)





